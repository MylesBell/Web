angular.module("myApp","ngRoute gameJoinView gameView headerBarInfoView playerCreationView tutorialView btford.socket-io LocalStorageModule UserServiceModule GameInfoServiceModule config ngIdle toastr".split(" ")).config(["$routeProvider","IdleProvider","KeepaliveProvider","TitleProvider","toastrConfig",function(a,b,f,e,g){b.idle(5);b.timeout(600);f.interval(2);e.enabled(!1);a.when("/game",{templateUrl:"views/game/game.html",controller:"GameCtrl"}).when("/join",{templateUrl:"views/gameJoin/gameJoin.html",
controller:"GameJoinCtrl"}).when("/lobby",{templateUrl:"views/lobby/lobby.html",controller:"LobbyCtrl"}).when("/tutorial",{templateUrl:"views/tutorials/tutorial.html",controller:"TutorialCtrl"}).when("/stats",{templateUrl:"views/stats/stats.html",controller:"StatsCtrl"}).when("/",{templateUrl:"views/playerCreation/playerCreation.html",controller:"PlayerCreationCtrl"}).otherwise({redirectTo:"/"});angular.extend(g,{allowHtml:!1,closeButton:!0,closeHtml:"<button>&times;</button>",extendedTimeOut:1E3,
iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",onHidden:null,onShown:null,onTap:null,progressBar:!0,tapToDismiss:!0,templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:4E3,titleClass:"toast-title",toastClass:"toast"})}]).run(["Idle",function(a){a.watch()}]);angular.module("config",[]).constant("ENV",{name:"production",socketIOEndpoint:"http://headgearsofwar.com:1337",skipCode:!0});angular.module("playerCreationView",["ngRoute"]).controller("PlayerCreationCtrl",["$scope","UserService","LocationService","GameInfoService","ClassService",function(a,b,f,e,g){a.username="";a.validname=!1;a.started=!1;var d=!0,c=!0;a.currentClassSelected=0;a.currentClass="";a.titleTranslate=60;a.nameFormTranslate=100;a.chooseTranslate=200;a.headerFontSize=50;a.classTranslate=0;g.getClasses().then(function(c){a.classes=c;a.currentClass=a.classes[0].name});a.start=function(){a.started=!0;a.titleTranslate=
20;a.headerFontSize=40;a.nameFormTranslate=0;a.chooseTranslate=100};a.setName=function(){d&&(d=!1,a.validname&&(a.nameFormTranslate=-100,a.chooseTranslate=0))};a.checkName=function(){""===a.username?(console.log("Please enter a name"),a.validname=!1):20<a.username.length?(console.log("Please use a shorter name"),a.validname=!1):a.validname=!0};a.nextClass=function(){3>a.currentClassSelected&&(a.classTranslate-=25,a.currentClassSelected+=1,a.currentClass=a.classes[a.currentClassSelected].name)};a.prevClass=
function(){0<a.currentClassSelected&&(a.classTranslate+=25,--a.currentClassSelected,a.currentClass=a.classes[a.currentClassSelected].name)};a.deploy=function(){c&&(c=!1,b.registerUserWithServer(a.username,a.currentClassSelected).then(function(a){f.setPath(a.path)})["catch"](function(a){console.log(a);alert(a.message);c=!0}))}}]);angular.module("gameView",["ngRoute"]).controller("GameCtrl",["$scope","NetworkService","UserService","$interval","SpecialPowerManagerService","$rootScope","toastr","GameInfoService","LocationService",function(a,b,f,e,g,d,c,p,r){function h(c){c=Number(c.substring(c.length-1,c.length));a.specialPowers[c].enabled&&(a.specialPowers[c].enabled=!1,a.$apply(),g.specialButtonUsed(a.specialPowers[c],c))}function x(a){void 0!==window.navigator.vibrate&&window.navigator.vibrate(100)}function u(){var c=f.getTeamColor();
document.getElementById("main-container");var d=document.getElementById("stats-container"),b=document.getElementById("game-container");d.style.backgroundColor=c.dark;"blue-team"===a.teamClass?(a.teamClassCSS="blue-team",b.style.backgroundImage='url("/resources/images/backgrounds/blue_game_back.jpg")'):(a.teamClassCSS="red-team",b.style.backgroundImage='url("/resources/images/backgrounds/red_game_back.jpg")');b.style.height="100%";b.style.top="0px";c=f.getHeroClass();a.classImageUrl=0===c?"/resources/images/hats/hunter_circle_small.png":
1===c?"/resources/images/hats/hitman_circle_small.png":2===c?"/resources/images/hats/healer_circle_small.png":"/resources/images/hats/hardhat_circle_small.png"}function l(){0>=a.timeToRespawn?(e.cancel(k),console.log("respawn timer is done")):--a.timeToRespawn}a.teamClass=f.getUserTeam();a.teamClassCSS="blue-team";a.nearBase=!1;a.playerDead=!1;a.playerLevel=1;a.timeToRespawn=10;a.gameOver=!1;a.winner="";a.winnerTeam="";a.specialPowers=f.getSpecialPowers();a.playerLane=f.getLane();a.classImageUrl=
"";var k,n=a.timeToRespawn;document.getElementById("switch-button");p=document.getElementById("main-container");window.oncontextmenu=function(a){console.log("Prevented long press");a.preventDefault();a.stopPropagation();return!1};u();b.registerListener({eventName:"gamePlayerDied",call:function(c){a.teamClassCSS="dead-team";a.playerDead=!0;a.timeToRespawn=n;x(1E3);k=e(l,1E3)}});b.registerListener({eventName:"gamePlayerRespawn",call:function(c){console.log("Player respawned on the server");a.timeToRespawn=
"Now";a.playerDead=!1;x(1E3);u()}});b.registerListener({eventName:"gameStateUpdate",call:function(c){2===c.state?(a.gameOver=!0,a.winnerTeam=0===c.winner?"VIKINGS":"COWBOYS","red-team"===a.teamClass?0===c.winner?(a.winner=!0,a.wonOrLost="Won!"):(a.winner=!1,a.wonOrLost="Lost!"):0===c.winner?(a.winner=!1,a.wonOrLost="Lost!"):(a.winner=!0,a.wonOrLost="Won!")):1===c.state&&(a.gameOver=!1)}});b.registerListener({eventName:"gamePlayerChangeHealth",call:function(a){x(100)}});b.registerListener({eventName:"gamePlayerLevelUp",
call:function(b){console.log("Player leveled up"+b.level);a.playerLevel=b.level;c.success("LEVEL UP!")}});b.registerListener({eventName:"gamePlayerSwitchLane",call:function(c){console.log("lane switch");a.playerLane=c.lane}});p.addEventListener("touchstart",function(a){a.preventDefault();for(var c=0;c<a.touches.length;c++){var b=a.touches[c],b=document.elementFromPoint(b.clientX,b.clientY).id;"joystick-canvas"===b?d.$emit("canvas.touch.start",a):-1<b.indexOf("special")?h(b):"stats-button"===b&&r.setPath("/stats")}});
a.useSpecial=function(a){h(a.id.toString())};a.viewStats=function(){console.log("sats");r.setPath("/stats")}}]);angular.module("gameView").controller("JoystickController",["$scope","InputHandlerService","NetworkService","UserService","$rootScope",function(a,b,f,e,g){function d(a){F=Math.PI/180*(1-a.playerHealth/a.maxHealth)*180+.002;179<F&&(F=179);u()}function c(a){y=Math.PI/180*(1-a.currentBaseHealth/a.maxBaseHealth)*180+.002;179<y&&(y=179);u()}function p(){l.style.width="100%";l.style.height="100%";l.width=l.offsetWidth;l.height=l.offsetHeight;n=Math.floor(l.width/2);q=Math.floor(l.height/2);v=.85*n;v>l.height/
2&&(console.log("canvas too big, resizing"),v=l.height/2-t/2);u()}function r(a){var c,b;if("touchmove"===a.type||"touchstart"===a.type){var d=l.getBoundingClientRect();c=a.touches[0].clientX-d.left;b=a.touches[0].clientY-d.top}else d=l.getBoundingClientRect(),c=a.clientX-d.left,b=a.clientY-d.top;a=c-t;d=b-t;c=Math.sqrt(Math.pow(c-n,2)+Math.pow(b-q,2));D.distToOrigin=c;c>v||(D.x=a,D.y=d,D.down=!0)}function h(){l.removeEventListener("mousemove",r);l.removeEventListener("touchmove",r);z=!1;D.down=!1;
window.cancelAnimationFrame(B)}function x(){u();z&&requestAnimationFrame(x)}function u(){k.clearRect(0,0,l.width,l.height);var c=Math.atan2(D.y+t-q,D.x+t-n);0>c&&(c=Math.PI- -1*c+Math.PI);c>337.5*Math.PI/180&&(c=-22.5*Math.PI/180);for(var b=Math.PI/180*45,d=Math.PI/180*-22.5,e=d+Math.PI/180*45,h=-1,r=0;8>r;r++)c>=d&&c<=e&&D.distToOrigin>w&&D.down?(k.fillStyle="#ECECEC",k.strokeStyle="#ECECEC",h=r):(k.fillStyle="white",k.strokeStyle="white"),k.lineWidth=1,k.beginPath(),k.moveTo(n,q),k.arc(n,q,v,d,
e),k.moveTo(n,q),k.closePath(),k.stroke(),k.fill(),d=e%(2*Math.PI),e+=b;c=m;c!==h&&(c!==h&&-1!==h?(c=h,a.inputButtonClicked(c)):c!==h&&-1===h&&(c=h,a.inputButtonClicked(c),A.style.backgroundPositionX="0%",A.style.backgroundPositionY="0%"));m=c;k.fillStyle="white";k.strokeStyle="white";k.lineWidth=1;k.beginPath(0);k.arc(n,q,w,0,2*Math.PI);k.closePath();k.fill();k.stroke();k.lineWidth=1;b=F+G;h=y+G;3.13<b&&(b=3.14);3.13<h&&(h=3.14);c=1.5*Math.PI+b;b=1.5*Math.PI-b;k.fillStyle=C.health.player.remaining;
k.strokeStyle=C.health.player.remaining;k.lineWidth=10;k.beginPath();k.arc(n,q,Math.floor(.85*v),b,c,!0);k.stroke();c=1.5*Math.PI+h;b=1.5*Math.PI-h;k.strokeStyle=C.health.base.remaining;k.fillStyle=C.health.base.remaining;k.beginPath();k.arc(n,q,Math.floor(.65*v),b,c,!0);k.stroke();k.drawImage(I,Math.floor(n-J/2),Math.floor(q-.86*v-J/2));k.drawImage(H,Math.floor(n-K/2),Math.floor(q-.65*v-K/2));k.fillStyle=E;k.strokeStyle=E;k.lineWidth=0;D.down?(k.beginPath(),k.arc(D.x+t,D.y+t,t,0,2*Math.PI,!0)):(k.beginPath(),
k.arc(n,q,t,0,2*Math.PI,!0));k.stroke();k.fill()}a.inputButtonClicked=function(a){b.handleInput({direction:a})["catch"](function(a){})};f.registerListener({eventName:"gamePlayerChangeHealth",call:d});f.registerListener({eventName:"gamePlayerRespawn",call:function(a){console.log("Player respawned on the server");d({playerHealth:1E3,maxHealth:1E3})}});f.registerListener({eventName:"gameBaseChangeHealth",call:c});f.registerListener({eventName:"gameStateUpdate",call:function(a){2===a.state&&c({currentBaseHealth:1,
maxBaseHealth:1})}});var l=document.getElementById("joystick-canvas"),k=l.getContext("2d"),n,q,t=30,v,w=40,m=-1,B,z=!1,F=1E-4,y=1E-4,A=document.getElementById("game-container"),C=e.getTeamColor(),E=C.dark,G=.2,H=new Image,K=25,I=new Image,J=30;console.log(e.getUserTeam());"red-team"===e.getUserTeam()?H.src="/resources/images/base_health_icon_red.png":H.src="/resources/images/base_health_icon_blue.png";H.onload=function(){p()};I.src="/resources/images/user_health_icon.png";I.onload=function(){p()};
var D={width:2*t,height:2*t,x:n-t,y:q-t,distToCenter:0,down:!1};p();g.$on("canvas.touch.start",function(a,c){z=!0;r(c);l.addEventListener("touchmove",r);B=window.requestAnimationFrame(x)});l.addEventListener("mouseup",function(a){h()});l.addEventListener("touchend",function(a){h()});window.addEventListener("resize",p);c({currentBaseHealth:1,maxBaseHealth:1})}]);angular.module("gameJoinView",["ngRoute"]).controller("GameJoinCtrl",["$scope","UserService","LocationService","NetworkService","GameInfoService",function(a,b,f,e,g){a.username=b.getUsername();a.gamecode="";a.enableInput=!0;a.joinGame=function(){var d=a.gamecode.toLowerCase();b.attemptToJoinGame(d).then(function(a){console.log(a);0===a.state||1===a.state?f.setPath("/tutorial"):console.log("Son you fucked up")})["catch"](function(c){console.log(c);a.gamecode=c.message;a.enableInput=!0});a.gamecode=
"Joining game...";a.enableInput=!1}}]);angular.module("myApp").controller("LobbyCtrl",["$scope","$rootScope","UserService","LocationService","GameInfoService","NetworkService",function(a,b,f,e,g,d){function c(c){1===c.state&&(a.canJoin=!0,a.buttonText="CLICK TO JOIN GAME")}function p(c){a.players=c.playerList}a.players=g.getPlayerList();a.showStartButton=!0;a.canJoin=!1;a.buttonText="NOT STARTED YET";document.getElementById("lobby-footer").addEventListener("click",function(){var a=document.getElementById("main-container");a.requestFullscreen?
a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()});a.getHeroClassName=function(a){return 0===a?"HUNTER":1===a?"HITMAN":2===a?"HEALER":"HARDHAT"};a.startGame=function(){a.canJoin||1===f.getGameState()?e.setPath("/game"):console.error("Tried joining game but game state wasn't 1 but "+f.getGameState())};if(1===f.getGameState()||1===g.getGameState())a.showStartButton=!0,a.canJoin=
!0,a.buttonText="CLICK TO JOIN GAME";b.$on("gameStateUpdate",function(a,b){c(b)});d.registerListener({eventName:"gamePlayerJoined",call:p});d.registerListener({eventName:"gamePlayerLeft",call:p});d.registerListener({eventName:"gameStateUpdate",call:c})}]);angular.module("tutorialView",["ngRoute"]).controller("TutorialCtrl",["$scope","ENV","UserService","LocationService","TutorialService","GameInfoService",function(a,b,f,e,g,d){function c(){0===a.currentTutorialIndex?a.prevText=p?"SKIP":"":a.currentTutorialIndex===a.tutorialSteps-1?a.nextText="LOBBY":(a.prevText="PREV",a.nextText="NEXT")}a.tutorialSteps=0;a.currentTutorialIndex=0;a.nextText="NEXT";a.prevText="";a.xTranslate=0;(function(){var a=f.getTeamColor(),c=document.getElementById("tutorial-controls");
c.style.backgroundColor=a.dark;"red-team"===f.getUserTeam()?c.style.backgroundImage="url('../resources/images/backgrounds/red_tut_polybackground.jpg')":c.style.backgroundImage="url('../resources/images/backgrounds/blue_tut_polybackground.jpg')"})();var p=!1;"development"===b.name&&(p=!0,a.prevText="SKIP");a.tutorials=g.makeTutorial(f.getHeroClass(),f.getUserTeam(),f.getSpecialPowers());document.getElementById("tutorial-sliding-container").addEventListener("touchstart",function(a){a.preventDefault()});
a.tutorialSteps=a.tutorials.length;var r=100/a.tutorialSteps;a.getStyle=function(a){return{background_image:"linear-gradient(to bottom, rgba(255,255,255,0) 50%,rgba(0,0,0,0.6) 100%), url('"+a.tutorialImage.image+"')",background_position_x:a.tutorialImage.offset_x}};a.next=function(){a.currentTutorialIndex<a.tutorialSteps-1?(a.xTranslate-=r,a.currentTutorialIndex+=1):e.setPath("/lobby");c()};a.prev=function(){0<a.currentTutorialIndex?(a.xTranslate+=r,--a.currentTutorialIndex):p&&e.setPath("/lobby");
c()}}]);angular.module("headerBarInfoView",["ngRoute"]).controller("headerBarInfoCtrl",["$scope","UserService","LocationService","NetworkService",function(a,b,f,e){a.username=b.getUsername();a.teamClass=b.getUserTeam();a.hideHeader=!1;a.$on("$routeChangeStart",function(e,d){a.username=b.getUsername()});e.registerListener({eventName:"gamePlayerJoined",call:function(){a.hideHeader=!0}});if("/"===f.getPath()||"/join"===f.getPath())a.hideHeader=!1;if("/tutorial"===f.getPath()||"/lobby"===f.getPath()||"/game"===
f.getPath())a.hideHeader=!0}]);angular.module("myApp").factory("socket",["socketFactory","ENV",function(a,b){var f=io.connect(b.socketIOEndpoint);return mySocket=a({ioSocket:f})}]);angular.module("myApp").service("NetworkService",["$q","socket","StorageService","$rootScope","Idle",function(a,b,f,e,g){function d(a,b){listenerEventList.forEach(function(d){d.eventName===a&&(d=d.call,d(b))},this);e.$emit(a,b)}e.events=[];e.$on("IdleStart",function(){console.log("Player is now idle")});e.$on("IdleWarn",function(a,b){});e.$on("IdleTimeout",function(){b.disconnect();e.$apply(function(){d("locationChange","/")});g.watch()});e.$on("IdleStart",function(){console.log("Player is now idle")});
e.$on("IdleWarn",function(a,b){});e.$on("IdleTimeout",function(){b.disconnect();e.$apply(function(){d("locationChange","/")});g.watch()});listenerEventList=[];b.on("connect",function(a){b.emit("subscribe",{name:"mobile",existingID:0})});b.on("locationChange",function(a){d("locationChange",a)});b.on("gameStateUpdate",function(a){d("gameStateUpdate",a)});b.on("gamePlayerJoined",function(a){d("gamePlayerJoined",a)});b.on("gamePlayerLeft",function(a){d("gamePlayerLeft",a)});b.on("gamePlayerNearBase",
function(a){d("gamePlayerNearBase",a)});b.on("gamePlayerChangeHealth",function(a){d("gamePlayerChangeHealth",a)});b.on("gamePlayerDied",function(a){d("gamePlayerDied",a)});b.on("gamePlayerRespawn",function(a){d("gamePlayerRespawn",a)});b.on("gameBaseChangeHealth",function(a){d("gameBaseChangeHealth",a)});b.on("gamePlayerLevelUp",function(a){d("gamePlayerLevelUp",a)});b.on("gamePlayerSwitchLane",function(a){d("gamePlayerSwitchLane",a)});b.on("gamePlayersStats",function(a){d("gamePlayersStats",a)});
return{send:function(c,d){var e=a.defer();b.emit(c,d,function(a){a.ok?e.resolve(a):e.reject(a)});return e.promise},registerListener:function(a){listenerEventList.push(a)},alertListeners:d}}]);angular.module("myApp").factory("StorageService",["$q","localStorageService",function(a,b){return{put:function(a,e){b.set(a,e)},get:function(a){b.get(a)}}}]).config(["localStorageServiceProvider",function(a){a.setPrefix("rushmore").setStorageType("sessionStorage").setNotify(!0,!0)}]);angular.module("GameInfoServiceModule",[]).factory("GameInfoService",["$q","NetworkService",function(a,b){var f=[],e=0,g;b.registerListener({eventName:"gamePlayerJoined",call:function(a){f=a.playerList}});b.registerListener({eventName:"gamePlayerLeft",call:function(a){f=a.playerList}});b.registerListener({eventName:"gameStateUpdate",call:function(a){e=a.state}});b.registerListener({eventName:"gamePlayersStats",call:function(a){g=a.playersStats;console.log(a)}});return{getPlayerList:function(){return f},
getGameState:function(){return e},getStats:function(){return g?(g.forEach(function(a){var c="/resources/images/stats/herotypes/",c=0===a.teamID?c+"viking_":c+"cowboy_",c=0===a.heroClass?c+"hunter.png":1===a.heroClass?c+"hitman.png":2===a.heroClass?c+"healer.png":c+"hardhat.png";a.image=c}),g):[{playerID:0,username:"Mike",deaths:4,gruntKills:3,heroKills:1,towersCaptured:1,heroClass:0,teamID:1,image:" /resources/images/stats/herotypes/viking_hunter.png"},{playerID:1,username:"Dave",deaths:3,gruntKills:6,
heroKills:4,towersCaptured:1,heroClass:0,teamID:1,image:" /resources/images/stats/herotypes/cowboy_hitman.png"},{playerID:2,username:"Madjid",deaths:0,gruntKills:5,heroKills:2,towersCaptured:2,heroClass:0,teamID:1,image:" /resources/images/stats/herotypes/viking_healer.png"}]}}}]);angular.module("myApp").factory("SpecialPowerManagerService",["$q","$interval","InputHandlerService",function(a,b,f){return{specialButtonUsed:function(e,g){var d;d=a.defer();console.log(e);void 0!==window.navigator.vibrate&&window.navigator.vibrate(200);f.handleSpecial(g);var c=b(function(){b.cancel(c);e.enabled=!0;d.resolve(e)},1E3*e.cooldownTime);return d.promise},setupSpecials:function(a){for(var b=0;b<a.length;b++)a[b].enabled=!0,a[b].cssName="special-"+a[b].type+"-"+a[b].idea;return a}}}]);angular.module("myApp").factory("ColorService",function(){var a={dark:"#3A539B",primary:"#446CB3",highlight:"#59ABE3",light:"#C5EFF7",health:{player:{remaining:"#87D37C",lost:"#90C695"},base:{lost:"#C5EFF7",remaining:"#59ABE3"}}},b={dark:"#96281B",primary:"#D91E18",highlight:"#E74C3C",health:{player:{remaining:"#87D37C",lost:"#90C695"},base:{lost:"#C5EFF7",remaining:"#E74C3C"}}};return{getRedColors:function(){return b},getBlueColors:function(){return a}}});angular.module("myApp").factory("InputHandlerService",["$q","NetworkService",function(a,b){return{handleInput:function(f){var e=a.defer(),g="",g="switch"===f.direction?"playerSwitchBase":"special"===f.direction?"playerSpecial":"playerDirection";b.send(g,{input:f.direction});e.resolve({ok:!0,direction:f.direction});return e.promise},handleSpecial:function(a){b.send("playerSpecial",{input:"special",specialUsedIndex:a})}}}]);angular.module("myApp").factory("LocationService",["$q","$rootScope","$location","NetworkService",function(a,b,f,e){function g(a){console.log(a);f.path(a)}b.$on("$locationChangeStart",function(a,b,e){});e.registerListener({eventName:"locationChange",call:g});return{setPath:g,getPath:function(){return f.url()}}}]);angular.module("UserServiceModule",[]).factory("UserService",["$q","NetworkService","$rootScope","LocationService","SpecialPowerManagerService","ColorService","ENV",function(a,b,f,e,g,d,c){function p(c,d){u=a.defer();c=c.trim();4!==c.length?u.reject({ok:!1,message:"Gamecodes should be 4 characters long"}):b.send("playerJoinGame",{gamecode:c,username:x,playerClass:d})["catch"](function(a){u.reject({ok:!1,message:a.message})});return u.promise}var r="",h="",x="",u,l=[],k=0,n=0,q=2,t;t=d.getRedColors();
b.registerListener({eventName:"gamePlayerJoined",call:function(a){a.uID===r&&(a.joinSuccess?(0===a.team?(h="red-team",t=d.getRedColors()):1===a.team&&(h="blue-team",t=d.getBlueColors()),l=g.setupSpecials(a.specials),k=a.state,n=a.lane,q=a.heroClass,u.resolve(a)):u.reject(a))}});return{registerUserWithServer:function(d,e){var h=a.defer();d=d.trim();0===d.length?h.reject({ok:!1,message:"Please enter a name"}):20<d.length?h.reject({ok:!1,message:"Please use a shorter name"}):b.send("playerRegister",
{username:d}).then(function(a){x=d;r=a.uID;c.skipCode?p("abcd",e).then(function(a){0!==a.state&&1!==a.state||h.resolve({ok:!0,path:"/tutorial"})}):h.resolve({ok:!0,username:d,path:"/join"})})["catch"](function(a){h.reject({ok:!1,message:a.message})});return h.promise},attemptToJoinGame:p,setUserTeam:function(a){h=a},getUserTeam:function(){return h},getUsername:function(){return x},getUserID:function(){return r},setUserID:function(){return r},getTeamColor:function(){return t},getSpecialPowers:function(){0===
l.length&&(l=[{id:0,name:"Flame Ring Attack",type:"Attack",idea:"Melee",description:"Immediately cripple enemies close to you.",filename:"",cooldownTime:10,numberOfUpgrades:5,done:!0,enabled:!0,cssName:"special-Attack-Melee",image:"images/flame_red.png"},{id:3,name:"Defense Buff",type:"Buff",idea:"Defense",description:"Increase your defense to you can take more punishment.",filename:"",cooldownTime:2,numberOfUpgrades:5,done:!0,enabled:!0,cssName:"special-Buff-Defense",image:"images/health_buff_blue.png"},
{id:6,name:"Healing Ring Spell",type:"Heal",idea:"Self-and-close",description:"Immediately heal teammates close to you.",filename:"",cooldownTime:25,numberOfUpgrades:5,done:!0,enabled:!0,cssName:"special-Heal-Self-and-close",image:"images/heal_group_green.png"}]);return l},getGameState:function(){return k},getLane:function(){return n},getHeroClass:function(){return q}}}]);angular.module("myApp").service("TutorialService",function(){function a(a){for(var f=[],e=0;e<a.length;e++){var g=a[e],d={};d.text=g.name;d.image="../resources/"+g.image;d.description=g.description;f.push(d)}return f}return{makeTutorial:function(b,f,e){var g="red-team"===f?"viking":"cowboy",d="red-team"===f?"cowboy":"viking";f="red-team"===f?"COWBOY":"VIKING";var c="../../resources/images/tutorial/classes/"+g+"_",p="";a(e);0===b?(b="HUNTER",c+="hunter_sm.jpg",p="A ranged class that can do big damage from distance, but must avoid close range combat"):
1===b?(b="HITMAN",c+="hitman_sm.jpg",p="A stealthy class with faster speed and ways of getting past opposing players without being detected"):2===b?(b="HEALER",c+="healer_sm.jpg",p="A slow, heavy class with big attack and lots of health"):(b="HARDHAT",c+="hardhat_sm.jpg",p=" A support class who can heal, and buff stats, of themselves and their teammates");return[{tutIndex:0,tutType:"single",tutorialTitle:"You are a "+g.toUpperCase()+"!",tutorialText:"Destroy the "+f+"'S base to win the game",tutorialImage:{image:"../../resources/images/tutorial/backgrounds/"+
d+"_base.jpg",offset_x:"50%"},visible:!0},{tutIndex:1,tutType:"single",tutorialTitle:"You Auto-Attack enemies beside you",tutorialText:"Defeating enemy grunts and heros will make you stronger!",tutorialImage:{image:"../../resources/images/tutorial/backgrounds/"+g+"_grunt_battle.jpg",offset_x:"80%"},visible:!1},{tutIndex:2,tutType:"single",tutorialTitle:"Capture towers for your team",tutorialText:"Captured towers make your army bigger!",tutorialImage:{image:"../../resources/images/tutorial/backgrounds/tower.jpg",
offset_x:"80%"},visible:!1},{tutIndex:3,tutType:"single",tutorialTitle:"Help your team on the other side",tutorialText:"Travel through caves to appear on the opposite screen!",tutorialImage:{image:"/resources/images/tutorial/backgrounds/cave.jpg",offset_x:"80%"},visible:!1},{tutIndex:4,tutType:"single",tutorialTitle:"You are a "+b,tutorialText:p,tutorialImage:{image:c,offset_x:"50%"},visible:!1},{tutIndex:5,tutType:"multi",tutorialTitle:"Tutorial side not shown",miniLessons:a(e),tutorialImage:{image:"../../resources/images/tutorial/backgrounds/"+
g+"_battle_with_base_background.jpg",offset_x:"80%"},visible:!1}]}}});angular.module("myApp").factory("ClassService",["$http","$q",function(a,b){var f=[{name:"Hunter",hatImage:"/resources/images/hats/hunter_circle_small.png",powers:[0,1,2],powerDesc:[]},{name:"Hitman",hatImage:"/resources/images/hats/hitman_circle_small.png",description:"I am a hitman",powers:[4,10,9],powerDesc:[]},{name:"Healer",hatImage:"/resources/images/hats/healer_circle_small.png",powers:[3,5,6],powerDesc:[]},{name:"Hardhat",hatImage:"/resources/images/hats/hardhat_circle_small.png",powers:[0,
11,12],powerDesc:[]}];return{getClasses:function(){var e=b.defer();a.get("/resources/json/specialsList.json").then(function(a){var b=a.data.items;f.forEach(function(a){a.powers.forEach(function(e){for(var g=0;g<b.length;g++)b[g].id===e&&a.powerDesc.push(b[g])})});e.resolve(f)});return e.promise}}}]);(function(){function a(a,f,e,g,d,c,p){function r(d,e){var h=function(a){for(var b=0;b<q.length;b++)if(q[b].toastId===a)return q[b]}(d);h&&!h.deleting&&(h.deleting=!0,h.isOpened=!1,a.leave(h.el).then(function(){if(h.scope.options.onHidden)h.scope.options.onHidden(!!e,h);h.scope.$destroy();var a=q.indexOf(h);delete v[h.scope.message];q.splice(a,1);(a=c.maxOpened)&&q.length>=a&&q[a-1].open.resolve();q.length||(k.remove(),k=null,w=p.defer())}))}function h(a,b,c,d){angular.isObject(c)&&(d=c,c=null);return l({iconClass:a,
message:b,optionsOverride:d,title:c})}function x(){return angular.extend({},c)}function u(c){if(k)return w.promise;k=angular.element("<div></div>");k.attr("id",c.containerId);k.addClass(c.positionClass);k.css({"pointer-events":"auto"});c=angular.element(document.querySelector(c.target));if(!c||!c.length)throw"Target for toasts doesn't exist";a.enter(k,c).then(function(){w.resolve()});return w.promise}function l(c){function e(a,c,b){function h(c){if(b[c])return function(){b[c](a)}}b.allowHtml?(a.scope.allowHtml=
!0,a.scope.title=d.trustAsHtml(c.title),a.scope.message=d.trustAsHtml(c.message)):(a.scope.title=c.title,a.scope.message=c.message);a.scope.toastType=a.iconClass;a.scope.toastId=a.toastId;a.scope.extraData=b.extraData;a.scope.options={extendedTimeOut:b.extendedTimeOut,messageClass:b.messageClass,onHidden:b.onHidden,onShown:h("onShown"),onTap:h("onTap"),progressBar:b.progressBar,tapToDismiss:b.tapToDismiss,timeOut:b.timeOut,titleClass:b.titleClass,toastClass:b.toastClass};b.closeButton&&(a.scope.options.closeHtml=
b.closeHtml)}function h(){function a(c){for(var b="containerId iconClasses maxOpened newestOnTop positionClass preventDuplicates preventOpenDuplicates templates".split(" "),d=0,h=b.length;d<h;d++)delete c[b[d]];return c}var b={toastId:n++,isOpened:!1,scope:g.$new(),open:p.defer()};b.iconClass=c.iconClass;c.optionsOverride&&(angular.extend(y,a(c.optionsOverride)),b.iconClass=c.optionsOverride.iconClass||b.iconClass);e(b,c,y);b.el=l(b.scope);return b}function l(a){var c=angular.element("<div toast></div>");
return f.get("$compile")(c)(a)}var y=x();if(!function(){var a=y.preventOpenDuplicates&&v[c.message];if(y.preventDuplicates&&c.message===t||a)return!0;t=c.message;v[c.message]=!0;return!1}()){var A=h();q.push(A);if(y.autoDismiss&&y.maxOpened&&q.length>y.maxOpened)for(var C=q.slice(0,q.length-y.maxOpened),E=0,w=C.length;E<w;E++)r(C[E].toastId);(y.maxOpened&&q.length<=y.maxOpened||!y.maxOpened)&&A.open.resolve();A.open.promise.then(function(){u(y).then(function(){A.isOpened=!0;if(y.newestOnTop)a.enter(A.el,
k).then(function(){A.scope.init()});else{var c=k[0].lastChild?angular.element(k[0].lastChild):null;a.enter(A.el,k,c).then(function(){A.scope.init()})}})});return A}}var k,n=0,q=[],t="",v={},w=p.defer();return{active:function(){return q.length},clear:function(a){if(1!==arguments.length||a)if(a)r(a.toastId);else for(var c=0;c<q.length;c++)r(q[c].toastId)},error:function(a,c,b){var d=x().iconClasses.error;return h(d,a,c,b)},info:function(a,c,b){var d=x().iconClasses.info;return h(d,a,c,b)},remove:r,
success:function(a,c,b){var d=x().iconClasses.success;return h(d,a,c,b)},warning:function(a,c,b){var d=x().iconClasses.warning;return h(d,a,c,b)}}}angular.module("toastr",[]).factory("toastr",a);a.$inject="$animate $injector $document $rootScope $sce toastrConfig $q".split(" ")})();
(function(){angular.module("toastr").constant("toastrConfig",{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1E3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,onTap:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",
templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5E3,titleClass:"toast-title",toastClass:"toast"})})();
(function(){function a(a){return{replace:!0,require:"^toast",templateUrl:function(){return a.templates.progressbar},link:function(a,b,g,d){function c(){var a=(h-(new Date).getTime())/r*100;b.css("width",a+"%")}var p,r,h;d.progressBar=a;a.start=function(a){p&&clearInterval(p);r=parseFloat(a);h=(new Date).getTime()+r;p=setInterval(c,10)};a.stop=function(){p&&clearInterval(p)};a.$on("$destroy",function(){clearInterval(p)})}}}angular.module("toastr").directive("progressBar",a);a.$inject=["toastrConfig"]})();
(function(){angular.module("toastr").controller("ToastController",function(){this.progressBar=null;this.startProgressBar=function(a){this.progressBar&&this.progressBar.start(a)};this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}})})();
(function(){function a(a,f,e,g){return{replace:!0,templateUrl:function(){return e.templates.toast},controller:"ToastController",link:function(d,c,e,r){function h(a){r.startProgressBar(a);return f(function(){r.stopProgressBar();g.remove(d.toastId)},a,1)}var x;d.toastClass=d.options.toastClass;d.titleClass=d.options.titleClass;d.messageClass=d.options.messageClass;d.progressBar=d.options.progressBar;if(d.options.closeHtml){e=angular.element(d.options.closeHtml);var u=a.get("$compile");e.addClass("toast-close-button");
e.attr("ng-click","close(true, $event)");u(e)(d);c.prepend(e)}d.init=function(){d.options.timeOut&&(x=h(d.options.timeOut));if(d.options.onShown)d.options.onShown()};c.on("mouseenter",function(){d.progressBar=!1;r.stopProgressBar();x&&f.cancel(x)});d.tapToast=function(){if(angular.isFunction(d.options.onTap))d.options.onTap();d.options.tapToDismiss&&d.close(!0)};d.close=function(a,c){c&&angular.isFunction(c.stopPropagation)&&c.stopPropagation();g.remove(d.toastId,a)};c.on("mouseleave",function(){if(0!==
d.options.timeOut||0!==d.options.extendedTimeOut)d.$apply(function(){d.progressBar=d.options.progressBar}),x=h(d.options.extendedTimeOut)})}}}angular.module("toastr").directive("toast",a);a.$inject=["$injector","$interval","toastrConfig","toastr"]})();angular.module("toastr").run(["$templateCache",function(a){a.put("directives/progressbar/progressbar.html",'<div class="toast-progress"></div>\n');a.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title}}">{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}" aria-label="{{message}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>\n')}]);/*
 MIT
*/
(function(a,b,f){b.module("ngIdle",["ngIdle.keepalive","ngIdle.idle","ngIdle.countdown","ngIdle.title","ngIdle.localStorage"]);b.module("ngIdle.keepalive",[]).provider("Keepalive",function(){var a={http:null,interval:600};this.http=function(d){if(!d)throw Error("Argument must be a string containing a URL, or an object containing the HTTP request configuration.");b.isString(d)&&(d={url:d,method:"GET"});d.cache=!1;a.http=d};var g=this.interval=function(b){b=parseInt(b);if(isNaN(b)||0>=b)throw Error("Interval must be expressed in seconds and be greater than 0.");
a.interval=b};this.$get=["$rootScope","$log","$interval","$http",function(d,c,p,r){function h(a,c){d.$broadcast("KeepaliveResponse",a,c)}function x(){d.$broadcast("Keepalive");b.isObject(a.http)&&r(a.http).success(h).error(h)}var f=null;return{_options:function(){return a},setInterval:g,start:function(){p.cancel(f);return f=p(x,1E3*a.interval)},stop:function(){p.cancel(f)},ping:function(){x()}}}]});b.module("ngIdle.idle",["ngIdle.keepalive","ngIdle.localStorage"]).provider("Idle",function(){var a=
{idle:1200,timeout:30,autoResume:"idle",interrupt:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",keepalive:!0},g=this.timeout=function(c){if(!1===c)a.timeout=0;else if(b.isNumber(c)&&0<=c)a.timeout=c;else throw Error("Timeout must be zero or false to disable the feature, or a positive integer (in seconds) to enable it.");};this.interrupt=function(c){a.interrupt=c};var d=this.idle=function(c){if(0>=c)throw Error("Idle must be a value in seconds, greater than 0.");
a.idle=c};this.autoResume=function(c){a.autoResume=!0===c?"idle":!1===c?"off":c};this.keepalive=function(c){a.keepalive=!0===c};this.$get=["$interval","$log","$rootScope","$document","Keepalive","IdleLocalStorage","$window",function(c,f,r,h,x,u,l){function k(){a.keepalive&&(m.running&&x.ping(),x.start())}function n(){a.keepalive&&x.stop()}function q(){m.idling=!m.idling;r.$broadcast("Idle"+(m.idling?"Start":"End"));m.idling?(n(),a.timeout&&(m.countdown=a.timeout,t(),m.timeout=c(t,1E3,a.timeout,!1))):
k();c.cancel(m.idle)}function t(){0>=m.countdown?v():(r.$broadcast("IdleWarn",m.countdown),m.countdown--)}function v(){n();c.cancel(m.idle);c.cancel(m.timeout);m.idling=!0;m.running=!1;m.countdown=0;r.$broadcast("IdleTimeout")}function w(a){a?u.set("expiry",{id:B,time:a}):u.remove("expiry")}var m={idle:null,timeout:null,idling:!1,running:!1,countdown:null},B=(new Date).getTime(),z={_options:function(){return a},_getNow:function(){return new Date},getIdle:function(){return a.idle},getTimeout:function(){return a.timeout},
setIdle:function(a){var c=this.running();this.unwatch();d(a);c&&this.watch()},setTimeout:function(a){var c=this.running();this.unwatch();g(a);c&&this.watch()},isExpired:function(){var a;a=(a=u.get("expiry"))&&a.time?new Date(a.time):null;return null!==a&&a<=this._getNow()},running:function(){return m.running},idling:function(){return m.idling},watch:function(b){c.cancel(m.idle);c.cancel(m.timeout);var d=a.timeout?a.timeout:0;b||w(new Date((new Date).getTime()+1E3*(a.idle+d)));m.idling?q():m.running||
k();m.running=!0;m.idle=c(q,1E3*a.idle,0,!1)},unwatch:function(){c.cancel(m.idle);c.cancel(m.timeout);m.idling=!1;m.running=!1;w(null);n()},interrupt:function(c){m.running&&(a.timeout&&this.isExpired()?v():("idle"===a.autoResume||"notIdle"===a.autoResume&&!m.idling)&&this.watch(c))}};h.find("html").on(a.interrupt,function(a){"mousemove"===a.type&&a.originalEvent&&0===a.originalEvent.movementX&&0===a.originalEvent.movementY||("mousemove"!==a.type||b.isUndefined(a.movementX)||a.movementX||a.movementY)&&
z.interrupt()});f=function(a){"ngIdle.expiry"===a.key&&a.newValue&&a.newValue!==a.oldValue&&b.fromJson(a.newValue).id!==B&&z.interrupt(!0)};l.addEventListener?l.addEventListener("storage",f,!1):l.attachEvent("onstorage",f);return z}]});b.module("ngIdle.countdown",["ngIdle.idle"]).directive("idleCountdown",["Idle",function(a){return{restrict:"A",scope:{value:"=idleCountdown"},link:function(b){b.value=a.getTimeout();b.$on("IdleWarn",function(a,c){b.$evalAsync(function(){b.value=c})});b.$on("IdleTimeout",
function(){b.$evalAsync(function(){b.value=0})})}}}]);b.module("ngIdle.title",[]).provider("Title",function(){var a=!0,g=this.enabled=function(b){a=!0===b};this.$get=["$document","$interpolate",function(d,c){var f=null,r="{{minutes}}:{{seconds}} until your session times out!",h="Your session has expired.";return{setEnabled:g,isEnabled:function(){return a},original:function(a){if(b.isUndefined(a))return f;f=a},store:function(a){if(a||!f)f=this.value()},value:function(a){if(b.isUndefined(a))return d[0].title;
d[0].title=a},idleMessage:function(a){if(b.isUndefined(a))return r;r=a},timedOutMessage:function(a){if(b.isUndefined(a))return h;h=a},setAsIdle:function(a){this.store();var b={totalSeconds:a};b.minutes=Math.floor(a/60);a-=60*b.minutes;a=Array(2-String(a).length+1).join("0")+a;b.seconds=a;this.value(c(this.idleMessage())(b))},setAsTimedOut:function(){this.store();this.value(this.timedOutMessage())},restore:function(){this.original()&&this.value(this.original())}}}]}).directive("title",["Title",function(a){return{restrict:"E",
link:function(b,d,c){a.isEnabled()&&!c.idleDisabled&&(a.store(!0),b.$on("IdleStart",function(){a.original(d[0].innerText)}),b.$on("IdleWarn",function(b,c){a.setAsIdle(c)}),b.$on("IdleEnd",function(){a.restore()}),b.$on("IdleTimeout",function(){a.setAsTimedOut()}))}}}]);b.module("ngIdle.localStorage",[]).service("IdleStorageAccessor",["$window",function(a){return{get:function(){return a.localStorage}}}]).service("IdleLocalStorage",["IdleStorageAccessor",function(a){function g(){var a={};this.setItem=
function(b,d){a[b]=d};this.getItem=function(b){return"undefined"!==typeof a[b]?a[b]:null};this.removeItem=function(b){a[b]=f}}var d=function(){try{var b=a.get();b.setItem("ngIdleStorage","");b.removeItem("ngIdleStorage");return b}catch(d){return new g}}();return{set:function(a,e){d.setItem("ngIdle."+a,b.toJson(e))},get:function(a){return b.fromJson(d.getItem("ngIdle."+a))},remove:function(a){d.removeItem("ngIdle."+a)},_wrapped:function(){return d}}}])})(window,window.angular);/*
 MIT License, http://www.opensource.org/licenses/MIT
*/
(function(a,b){var f=b.isDefined,e=b.isUndefined,g=b.isNumber,d=b.isObject,c=b.isArray,p=b.extend,r=b.toJson;b.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls";this.storageType="localStorage";this.cookie={expiry:30,path:"/"};this.notify={setItem:!0,removeItem:!1};this.setPrefix=function(a){this.prefix=a;return this};this.setStorageType=function(a){this.storageType=a;return this};this.setStorageCookie=function(a,b){this.cookie.expiry=a;this.cookie.path=b;return this};
this.setStorageCookieDomain=function(a){this.cookie.domain=a;return this};this.setNotify=function(a,b){this.notify={setItem:a,removeItem:b};return this};this.$get=["$rootScope","$window","$document","$parse",function(a,b,u,l){var k=this,n=k.prefix,q=k.cookie,t=k.notify,v=k.storageType,w;u?u[0]&&(u=u[0]):u=document;"."!==n.substr(-1)&&(n=n?n+".":"");var m=function(){try{var c=v in b&&null!==b[v],d=n+("__"+Math.round(1E7*Math.random()));c&&(w=b[v],w.setItem(d,""),w.removeItem(d));return c}catch(e){return v=
"cookie",a.$broadcast("LocalStorageModule.notification.error",e.message),!1}}(),B=function(b,c){c=e(c)?null:r(c);if(!m||"cookie"===k.storageType)return m||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),t.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:"cookie"}),A(b,c);try{w&&w.setItem(n+b,c),t.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:k.storageType})}catch(d){return a.$broadcast("LocalStorageModule.notification.error",
d.message),A(b,c)}return!0},z=function(b){if(!m||"cookie"===k.storageType)return m||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),C(b);b=w?w.getItem(n+b):null;if(!b||"null"===b)return null;try{return JSON.parse(b)}catch(c){return b}},F=function(){var b,c;for(b=0;b<arguments.length;b++)if(c=arguments[b],m&&"cookie"!==k.storageType)try{w.removeItem(n+c),t.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:c,storageType:k.storageType})}catch(d){a.$broadcast("LocalStorageModule.notification.error",
d.message),E(c)}else m||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),t.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:c,storageType:"cookie"}),E(c)},y;try{y=b.navigator.cookieEnabled||"cookie"in u&&(0<u.cookie.length||-1<(u.cookie="test").indexOf.call(u.cookie,"test"))}catch(H){a.$broadcast("LocalStorageModule.notification.error",H.message),y=!1}var A=function(b,f,k){if(e(f))return!1;if(c(f)||d(f))f=r(f);if(!y)return a.$broadcast("LocalStorageModule.notification.error",
"COOKIES_NOT_SUPPORTED"),!1;try{var p="",l=new Date,x="";null===f?(l.setTime(l.getTime()+-864E5),p="; expires="+l.toGMTString(),f=""):g(k)&&0!==k?(l.setTime(l.getTime()+864E5*k),p="; expires="+l.toGMTString()):0!==q.expiry&&(l.setTime(l.getTime()+864E5*q.expiry),p="; expires="+l.toGMTString());if(b){var m="; path="+q.path;q.domain&&(x="; domain="+q.domain);u.cookie=n+b+"="+encodeURIComponent(f)+p+m+x}}catch(C){return a.$broadcast("LocalStorageModule.notification.error",C.message),!1}return!0},C=function(b){if(!y)return a.$broadcast("LocalStorageModule.notification.error",
"COOKIES_NOT_SUPPORTED"),!1;for(var c=u.cookie&&u.cookie.split(";")||[],d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(n+b+"=")){b=decodeURIComponent(e.substring(n.length+b.length+1,e.length));try{return JSON.parse(b)}catch(f){return b}}}return null},E=function(a){A(a,null)},G=function(){for(var a=null,b=n.length,c=u.cookie.split(";"),d=0;d<c.length;d++){for(a=c[d];" "===a.charAt(0);)a=a.substring(1,a.length);a=a.substring(b,a.indexOf("="));E(a)}};
return{isSupported:m,getStorageType:function(){return v},set:B,add:B,get:z,keys:function(){if(!m)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var b=n.length,c=[],d;for(d in w)if(d.substr(0,b)===n)try{c.push(d.substr(b))}catch(e){return a.$broadcast("LocalStorageModule.notification.error",e.Description),[]}return c},remove:F,clearAll:function(b){var c=n?new RegExp("^"+n):RegExp();b=b?new RegExp(b):RegExp();if(!m||"cookie"===k.storageType)return m||
a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),G();var d=n.length,e;for(e in w)if(c.test(e)&&b.test(e.substr(d)))try{F(e.substr(d))}catch(f){return a.$broadcast("LocalStorageModule.notification.error",f.message),G()}return!0},bind:function(a,b,c,e){e=e||b;var h=z(e);null===h&&f(c)?h=c:d(h)&&d(c)&&(h=p(h,c));l(b).assign(a,h);return a.$watch(b,function(a){B(e,a)},d(a[b]))},deriveKey:function(a){return n+a},length:function(){for(var a=0,c=b[v],d=0;d<c.length;d++)0===
c.key(d).indexOf(n)&&a++;return a},cookie:{isSupported:y,set:A,add:A,get:C,remove:E,clearAll:G}}}]})})(window,window.angular);angular.module("btford.socket-io",[]).provider("socketFactory",function(){this.$get=["$rootScope","$timeout",function(a,b){var f=function(a,f){return f?function(){var d=arguments;b(function(){f.apply(a,d)},0)}:angular.noop};return function(b){b=b||{};var g=b.ioSocket||io.connect(),d=void 0===b.prefix?"socket:":b.prefix,c=b.scope||a;b=function(a,b){g.on(a,b.__ng=f(g,b))};return{on:b,addListener:b,once:function(a,b){g.once(a,b.__ng=f(g,b))},emit:function(a,b,c){var d=arguments.length-1;c=arguments[d];
"function"==typeof c&&(c=f(g,c),arguments[d]=c);return g.emit.apply(g,arguments)},removeListener:function(a,b){b&&b.__ng&&(arguments[1]=b.__ng);return g.removeListener.apply(g,arguments)},removeAllListeners:function(){return g.removeAllListeners.apply(g,arguments)},disconnect:function(a){return g.disconnect(a)},connect:function(){return g.connect()},forward:function(a,b){!1===a instanceof Array&&(a=[a]);b||(b=c);a.forEach(function(a){var c=d+a,e=f(g,function(){Array.prototype.unshift.call(arguments,
c);b.$broadcast.apply(b,arguments)});b.$on("$destroy",function(){g.removeListener(a,e)});g.on(a,e)})}}}}]});/*
 AngularJS v1.4.10
 (c) 2010-2015 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(a,b,f){function e(a,d,e){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(h,f,g,l,k){function n(){w&&(e.cancel(w),w=null);t&&(t.$destroy(),t=null);v&&(w=e.leave(v),w.then(function(){w=null}),v=null)}function q(){var g=a.current&&a.current.locals;if(b.isDefined(g&&g.$template)){var g=h.$new(),l=a.current;v=k(g,function(a){e.enter(a,null,v||f).then(function(){!b.isDefined(m)||m&&!h.$eval(m)||d()});n()});t=l.scope=g;t.$emit("$viewContentLoaded");t.$eval(B)}else n()}
var t,v,w,m=g.autoscroll,B=g.onload||"";h.$on("$routeChangeSuccess",q);q()}}}function g(a,b,d){return{restrict:"ECA",priority:-400,link:function(e,f){var g=d.current,l=g.locals;f.html(l.$template);var k=a(f.contents());g.controller&&(l.$scope=e,l=b(g.controller,l),g.controllerAs&&(e[g.controllerAs]=l),f.data("$ngControllerController",l),f.children().data("$ngControllerController",l));k(e)}}}a=b.module("ngRoute",["ng"]).provider("$route",function(){function a(c,d){return b.extend(Object.create(c),
d)}function e(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},f=d.keys=[];a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[\?\*])?/g,function(a,b,c,d){a="?"===d||"*?"===d?"?":null;d="*"===d||"*?"===d?"*":null;f.push({name:c,optional:!!a});b=b||"";return""+(a?"":b)+"(?:"+(a?b:"")+(d&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1");d.regexp=new RegExp("^"+a+"$",c?"i":"");return d}var f={};this.when=function(a,c){var d=b.copy(c);b.isUndefined(d.reloadOnSearch)&&
(d.reloadOnSearch=!0);b.isUndefined(d.caseInsensitiveMatch)&&(d.caseInsensitiveMatch=this.caseInsensitiveMatch);f[a]=b.extend(d,a&&e(a,d));if(a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";f[g]=b.extend({redirectTo:a},e(g,d))}return this};this.caseInsensitiveMatch=!1;this.otherwise=function(a){"string"===typeof a&&(a={redirectTo:a});this.when(null,a);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(e,g,p,l,k,n,q){function t(a){var c=
y.current;(F=(z=w())&&c&&z.$$route===c.$$route&&b.equals(z.pathParams,c.pathParams)&&!z.reloadOnSearch&&!B)||!c&&!z||e.$broadcast("$routeChangeStart",z,c).defaultPrevented&&a&&a.preventDefault()}function v(){var a=y.current,c=z;if(F)a.params=c.params,b.copy(a.params,p),e.$broadcast("$routeUpdate",a);else if(c||a)B=!1,(y.current=c)&&c.redirectTo&&(b.isString(c.redirectTo)?g.path(m(c.redirectTo,c.params)).search(c.params).replace():g.url(c.redirectTo(c.pathParams,g.path(),g.search())).replace()),l.when(c).then(function(){if(c){var a=
b.extend({},c.resolve),d,e;b.forEach(a,function(c,d){a[d]=b.isString(c)?k.get(c):k.invoke(c,null,null,d)});b.isDefined(d=c.template)?b.isFunction(d)&&(d=d(c.params)):b.isDefined(e=c.templateUrl)&&(b.isFunction(e)&&(e=e(c.params)),b.isDefined(e)&&(c.loadedTemplateUrl=q.valueOf(e),d=n(e)));b.isDefined(d)&&(a.$template=d);return l.all(a)}}).then(function(d){c==y.current&&(c&&(c.locals=d,b.copy(c.params,p)),e.$broadcast("$routeChangeSuccess",c,a))},function(b){c==y.current&&e.$broadcast("$routeChangeError",
c,a,b)})}function w(){var d,e;b.forEach(f,function(f,k){var h;if(h=!e){var l=g.path();h=f.keys;var m={};if(f.regexp)if(l=f.regexp.exec(l)){for(var n=1,p=l.length;n<p;++n){var q=h[n-1],r=l[n];q&&r&&(m[q.name]=r)}h=m}else h=null;else h=null;h=d=h}h&&(e=a(f,{params:b.extend({},g.search(),d),pathParams:d}),e.$$route=f)});return e||f[null]&&a(f[null],{params:{},pathParams:{}})}function m(a,c){var d=[];b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),
f=e[1];d.push(c[f]);d.push(e[2]||"");delete c[f]}});return d.join("")}var B=!1,z,F,y={routes:f,reload:function(){B=!0;var a={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0;B=!1}};e.$evalAsync(function(){t(a);a.defaultPrevented||v()})},updateParams:function(a){if(this.current&&this.current.$$route)a=b.extend({},this.current.params,a),g.path(m(this.current.$$route.originalPath,a)),g.search(a);else throw d("norout","Tried updating route when with no current route");}};e.$on("$locationChangeStart",
t);e.$on("$locationChangeSuccess",v);return y}]});var d=b.$$minErr("ngRoute");a.provider("$routeParams",function(){this.$get=function(){return{}}});a.directive("ngView",e);a.directive("ngView",g);e.$inject=["$route","$anchorScroll","$animate"];g.$inject=["$compile","$controller","$route"]})(window,window.angular);
